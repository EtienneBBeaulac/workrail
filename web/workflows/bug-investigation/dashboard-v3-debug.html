<!DOCTYPE html>
<html lang="en" data-bg-intensity="subtle">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîç Debug Dashboard</title>
    
    <!-- üéØ Design tokens -->
    <link rel="stylesheet" href="/assets/styles/tokens.css">
    <link rel="stylesheet" href="/assets/background-effects.css">
    <link rel="stylesheet" href="/assets/theme-toggle.css">
    
    <style>
        /* Toggle SVG orbs based on theme */
        [data-theme="dark"] .orbs-light { display: none; }
        [data-theme="dark"] .orbs-dark { display: block !important; }
        
        body {
            padding: var(--space-8);
        }
        
        .debug-info {
            position: fixed;
            top: 10px;
            right: 10px;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: var(--space-4);
            border-radius: var(--radius-md);
            font-family: monospace;
            font-size: 12px;
            z-index: 9999;
        }
        
        .content {
            position: relative;
            z-index: 1;
            background: rgba(255, 255, 255, 0.8);
            padding: var(--space-6);
            border-radius: var(--radius-lg);
            max-width: 800px;
            margin: 0 auto;
        }
        
        [data-theme="dark"] .content {
            background: rgba(30, 30, 30, 0.8);
        }
    </style>
</head>
<body>
    
    <!-- Debug Info -->
    <div class="debug-info">
        <div>Scripts loaded: <span id="scripts-status">checking...</span></div>
        <div>Theme: <span id="theme-status">unknown</span></div>
        <div>Orbs: <span id="orbs-status">checking...</span></div>
        <div>Rails: <span id="rails-status">checking...</span></div>
        <div>Particles: <span id="particles-status">checking...</span></div>
    </div>
    
    <!-- üé® Background Effects (Subtle Mode) -->
    <svg class="bg-orbs" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid slice">
        <defs>
            <filter id="orb-blur-debug" x="-100%" y="-100%" width="300%" height="300%">
                <feGaussianBlur in="SourceGraphic" stdDeviation="3"/>
            </filter>
        </defs>
        
        <!-- Orbs - Light Mode -->
        <g class="orbs-light">
            <circle cx="15" cy="15" r="8" fill="rgba(6, 182, 212, 0.4)" filter="url(#orb-blur-debug)">
                <animate attributeName="cx" values="15;18;12;15" dur="20s" repeatCount="indefinite"/>
                <animate attributeName="cy" values="15;18;12;15" dur="20s" repeatCount="indefinite"/>
            </circle>
            <circle cx="85" cy="10" r="10" fill="rgba(139, 92, 246, 0.4)" filter="url(#orb-blur-debug)">
                <animate attributeName="cx" values="85;82;88;85" dur="25s" repeatCount="indefinite"/>
                <animate attributeName="cy" values="10;13;7;10" dur="25s" repeatCount="indefinite"/>
            </circle>
            <circle cx="20" cy="85" r="9" fill="rgba(236, 72, 153, 0.4)" filter="url(#orb-blur-debug)">
                <animate attributeName="cx" values="20;17;23;20" dur="22s" repeatCount="indefinite"/>
                <animate attributeName="cy" values="85;82;88;85" dur="22s" repeatCount="indefinite"/>
            </circle>
            <circle cx="85" cy="80" r="7" fill="rgba(249, 115, 22, 0.4)" filter="url(#orb-blur-debug)">
                <animate attributeName="cx" values="85;88;82;85" dur="18s" repeatCount="indefinite"/>
                <animate attributeName="cy" values="80;83;77;80" dur="18s" repeatCount="indefinite"/>
            </circle>
        </g>
        
        <!-- Orbs - Dark Mode -->
        <g class="orbs-dark" style="display: none;">
            <circle cx="15" cy="15" r="8" fill="rgba(6, 182, 212, 0.3)" filter="url(#orb-blur-debug)">
                <animate attributeName="cx" values="15;18;12;15" dur="20s" repeatCount="indefinite"/>
                <animate attributeName="cy" values="15;18;12;15" dur="20s" repeatCount="indefinite"/>
            </circle>
            <circle cx="85" cy="10" r="10" fill="rgba(139, 92, 246, 0.35)" filter="url(#orb-blur-debug)">
                <animate attributeName="cx" values="85;82;88;85" dur="25s" repeatCount="indefinite"/>
                <animate attributeName="cy" values="10;13;7;10" dur="25s" repeatCount="indefinite"/>
            </circle>
            <circle cx="20" cy="85" r="9" fill="rgba(236, 72, 153, 0.3)" filter="url(#orb-blur-debug)">
                <animate attributeName="cx" values="20;17;23;20" dur="22s" repeatCount="indefinite"/>
                <animate attributeName="cy" values="85;82;88;85" dur="22s" repeatCount="indefinite"/>
            </circle>
            <circle cx="85" cy="80" r="7" fill="rgba(249, 115, 22, 0.3)" filter="url(#orb-blur-debug)">
                <animate attributeName="cx" values="85;88;82;85" dur="18s" repeatCount="indefinite"/>
                <animate attributeName="cy" values="80;83;77;80" dur="18s" repeatCount="indefinite"/>
            </circle>
        </g>
    </svg>
    
    <!-- Workflow Rails -->
    <div class="bg-rails">
        <!-- Horizontal rails with SVG paths -->
        <svg class="rail-path" id="rail-h1" viewBox="0 0 100 100" preserveAspectRatio="none">
            <path d="M 0,50 Q 25,45 50,50 T 100,50" fill="none" stroke="currentColor" stroke-width="0.3" opacity="0.4"/>
        </svg>
        <svg class="rail-path" id="rail-h2" viewBox="0 0 100 100" preserveAspectRatio="none">
            <path d="M 0,50 Q 25,55 50,50 T 100,50" fill="none" stroke="currentColor" stroke-width="0.3" opacity="0.4"/>
        </svg>
        
        <!-- Diagonal rails (empty divs styled with pseudo-elements) -->
        <div class="rail-path" id="rail-d1"></div>
        <div class="rail-path" id="rail-d2"></div>
    </div>
    
    <!-- Workflow Nodes (pulsing dots) -->
    <div class="workflow-node" style="left: 15%; top: 25%;"></div>
    <div class="workflow-node" style="left: 45%; top: 15%;"></div>
    <div class="workflow-node" style="left: 75%; top: 35%;"></div>
    <div class="workflow-node" style="left: 30%; top: 65%;"></div>
    <div class="workflow-node" style="left: 65%; top: 75%;"></div>
    
    <!-- Particle Container (will be populated by JS) -->
    <div class="bg-particles"></div>
    
    <!-- Grain Texture -->
    <div class="bg-grain"></div>
    
    <!-- Content -->
    <div class="content">
        <h1>üîç Debug Dashboard</h1>
        <p>This page tests if background effects and theme toggle work.</p>
        
        <div id="theme-toggle-container"></div>
        
        <h2>What You Should See:</h2>
        <ul>
            <li>‚ú® Colored orbs floating in the background</li>
            <li>üîµ Curved rails across the screen</li>
            <li>üü£ Pulsing nodes</li>
            <li>üí´ Moving particles</li>
            <li>üåô Theme toggle button (top right of debug box or here)</li>
        </ul>
        
        <h2>Test Actions:</h2>
        <button onclick="testThemeToggle()">Toggle Theme</button>
        <button onclick="testBackgroundVisibility()">Check Background Visibility</button>
    </div>
    
    <!-- Theme management -->
    <script src="/assets/theme-manager.js"></script>
    <script src="/assets/theme-toggle.js"></script>
    <script src="/assets/time-of-day-theme.js"></script>
    
    <!-- Background particle generation -->
    <script src="/assets/particle-generator.js"></script>
    <script>
        // Particle generator auto-initializes, just update status after it runs
        setTimeout(() => {
            const particleCount = document.querySelectorAll('.particle').length;
            document.getElementById('particles-status').textContent = 
                particleCount > 0 ? `‚úÖ ${particleCount} generated` : '‚ùå None';
            console.log('[Debug] Particles:', particleCount);
        }, 1000);
    </script>
    
    <!-- Debug script -->
    <script>
        // Check if scripts loaded
        setTimeout(() => {
            const hasThemeManager = typeof window.WorkrailTheme !== 'undefined';
            const hasThemeToggle = document.querySelector('.theme-toggle') !== null;
            
            document.getElementById('scripts-status').textContent = 
                hasThemeManager ? '‚úÖ Theme Manager' : '‚ùå Missing';
            
            // Check theme
            const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
            document.getElementById('theme-status').textContent = currentTheme;
            
            // Check orbs
            const orbs = document.querySelectorAll('.bg-orbs circle');
            document.getElementById('orbs-status').textContent = 
                orbs.length > 0 ? `‚úÖ ${orbs.length} circles` : '‚ùå None';
            
            // Check rails
            const rails = document.querySelectorAll('.rail-path');
            document.getElementById('rails-status').textContent = 
                rails.length > 0 ? `‚úÖ ${rails.length} rails` : '‚ùå None';
            
            console.log('[Debug] Theme Manager:', hasThemeManager);
            console.log('[Debug] Theme Toggle:', hasThemeToggle);
            console.log('[Debug] Current Theme:', currentTheme);
            console.log('[Debug] Orbs:', orbs.length);
            console.log('[Debug] Rails:', rails.length);
        }, 500);
        
        function testThemeToggle() {
            if (typeof window.WorkrailTheme !== 'undefined') {
                window.WorkrailTheme.toggle();
                console.log('[Debug] Theme toggled to:', window.WorkrailTheme.get());
            } else {
                alert('Theme manager not loaded!');
            }
        }
        
        function testBackgroundVisibility() {
            const orbs = document.querySelector('.bg-orbs');
            const rails = document.querySelector('.bg-rails');
            const nodes = document.querySelectorAll('.workflow-node');
            const particles = document.querySelectorAll('.particle');
            
            const report = `
Background Elements:
- Orbs SVG: ${orbs ? '‚úÖ Present' : '‚ùå Missing'}
  - Computed styles: ${orbs ? window.getComputedStyle(orbs).display : 'N/A'}
  - Z-index: ${orbs ? window.getComputedStyle(orbs).zIndex : 'N/A'}
  - Opacity: ${orbs ? window.getComputedStyle(orbs).opacity : 'N/A'}
  
- Rails: ${rails ? '‚úÖ Present' : '‚ùå Missing'}
  - Computed styles: ${rails ? window.getComputedStyle(rails).display : 'N/A'}
  
- Nodes: ${nodes.length} found
- Particles: ${particles.length} found
            `;
            
            console.log(report);
            alert(report);
        }
    </script>
    
</body>
</html>

