<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîç Bug Investigation Dashboard</title>
    
    <!-- Design System v1.2 -->
    <link rel="stylesheet" href="/assets/design-system.css">
    <link rel="stylesheet" href="/assets/components.css">
    <link rel="stylesheet" href="/assets/animations.css">
    <link rel="stylesheet" href="/assets/styles.css">
    <link rel="stylesheet" href="/workflows/bug-investigation/styles-v2.css">
    <link rel="stylesheet" href="/assets/theme-toggle.css">
    
    <!-- Theme Management -->
    <script src="/assets/theme-manager.js"></script>
    <script src="/assets/theme-toggle.js"></script>
    
    <!-- Background Effects -->
    <link rel="stylesheet" href="/assets/background-effects.css">
    <script src="/assets/time-of-day-theme.js"></script>
    <script src="/assets/particle-generator.js"></script>
    
    <!-- Component Library (Jetpack Compose-style components) -->
    <script src="/assets/components.js"></script>
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
    <!-- Background Effects -->
    <svg class="bg-orbs" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid slice">
        <defs>
            <filter id="orb-blur-dash" x="-100%" y="-100%" width="300%" height="300%">
                <feGaussianBlur in="SourceGraphic" stdDeviation="3"/>
            </filter>
        </defs>
        
        <!-- Orbs - Light Mode -->
        <g class="orbs-light">
            <circle cx="15" cy="15" r="8" fill="rgba(6, 182, 212, 0.4)" filter="url(#orb-blur-dash)">
                <animate attributeName="cx" values="15;18;12;15" dur="20s" repeatCount="indefinite"/>
                <animate attributeName="cy" values="15;18;12;15" dur="20s" repeatCount="indefinite"/>
            </circle>
            <circle cx="85" cy="10" r="10" fill="rgba(139, 92, 246, 0.4)" filter="url(#orb-blur-dash)">
                <animate attributeName="cx" values="85;82;88;85" dur="25s" repeatCount="indefinite"/>
                <animate attributeName="cy" values="10;13;7;10" dur="25s" repeatCount="indefinite"/>
            </circle>
            <circle cx="20" cy="85" r="9" fill="rgba(236, 72, 153, 0.4)" filter="url(#orb-blur-dash)">
                <animate attributeName="cx" values="20;17;23;20" dur="22s" repeatCount="indefinite"/>
                <animate attributeName="cy" values="85;82;88;85" dur="22s" repeatCount="indefinite"/>
            </circle>
        </g>
        
        <!-- Orbs - Dark Mode -->
        <g class="orbs-dark" style="display: none;">
            <circle cx="15" cy="15" r="8" fill="rgba(6, 182, 212, 0.3)" filter="url(#orb-blur-dash)">
                <animate attributeName="cx" values="15;18;12;15" dur="20s" repeatCount="indefinite"/>
                <animate attributeName="cy" values="15;18;12;15" dur="20s" repeatCount="indefinite"/>
            </circle>
            <circle cx="85" cy="10" r="10" fill="rgba(139, 92, 246, 0.35)" filter="url(#orb-blur-dash)">
                <animate attributeName="cx" values="85;82;88;85" dur="25s" repeatCount="indefinite"/>
                <animate attributeName="cy" values="10;13;7;10" dur="25s" repeatCount="indefinite"/>
            </circle>
            <circle cx="20" cy="85" r="9" fill="rgba(236, 72, 153, 0.3)" filter="url(#orb-blur-dash)">
                <animate attributeName="cx" values="20;17;23;20" dur="22s" repeatCount="indefinite"/>
                <animate attributeName="cy" values="85;82;88;85" dur="22s" repeatCount="indefinite"/>
            </circle>
        </g>
    </svg>
    
    <style>
        /* Show/hide orbs based on theme */
        [data-theme="dark"] .orbs-light { display: none; }
        [data-theme="dark"] .orbs-dark { display: block !important; }
    </style>
    
    <!-- Workflow Rails & Nodes -->
    <div class="bg-rails">
        <div class="rail-path rail-h1">
            <svg viewBox="0 0 1400 100" preserveAspectRatio="none">
                <path d="M0,50 Q350,20 700,50 T1400,50" stroke="rgba(139, 92, 246, 0.3)" stroke-width="2" fill="none"/>
            </svg>
        </div>
        <div class="rail-path rail-h2">
            <svg viewBox="0 0 1400 100" preserveAspectRatio="none">
                <path d="M0,50 Q350,80 700,50 T1400,50" stroke="rgba(6, 182, 212, 0.3)" stroke-width="2" fill="none"/>
            </svg>
        </div>
        <div class="rail-path rail-d1"></div>
        <div class="rail-path rail-d2"></div>
    </div>
    
    <!-- Workflow Nodes -->
    <div class="workflow-node node-1"></div>
    <div class="workflow-node node-2"></div>
    <div class="workflow-node node-3"></div>
    <div class="workflow-node node-4"></div>
    <div class="workflow-node node-5"></div>
    
    <div id="particle-container"></div>
    
    <!-- Confetti Container -->
    <div id="confetti-container"></div>

    <!-- Header -->
    <header class="dashboard-header">
        <div class="header-content">
            <div class="header-left">
                <a href="/" class="back-button" title="Back to all sessions">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12.5 15L7.5 10L12.5 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    All Sessions
                </a>
                <h1>üîç Bug Investigation Dashboard</h1>
            </div>
            <div class="header-meta">
                <span class="session-badge" id="sessionBadge">...</span>
                <span class="last-update" id="lastUpdate">Loading...</span>
            </div>
        </div>
    </header>

    <!-- Status Bar (Sticky) -->
    <div class="status-bar" id="statusBar">
        <div class="status-item">
            <div class="status-label">STATUS</div>
            <div class="status-value" id="statusValue" data-key="dashboard.status">--</div>
        </div>
        <div class="status-item">
            <div class="status-label">PROGRESS</div>
            <div class="status-value" id="progressValue" data-key="dashboard.progress">--</div>
        </div>
        <div class="status-item">
            <div class="status-label">CONFIDENCE</div>
            <div class="status-value" id="confidenceValue" data-key="dashboard.confidence">--</div>
        </div>
        <div class="status-item">
            <div class="status-label">CURRENT PHASE</div>
            <div class="status-value" id="currentPhaseValue" data-key="dashboard.currentPhase">--</div>
        </div>
        <div class="status-item">
            <div class="status-label">DURATION</div>
            <div class="status-value" id="durationValue">--</div>
        </div>
    </div>

    <!-- Main Content -->
    <main class="dashboard-main">
        <!-- Hero Section (Contextual) -->
        <div id="heroContainer"></div>

        <!-- Smart Cards Container -->
        <div id="cardsContainer"></div>

        <!-- Back to Home -->
        <div class="back-link">
            <a href="/">‚Üê Back to All Sessions</a>
        </div>
    </main>

    <!-- Scripts -->
    <script src="/workflows/bug-investigation/dashboard-v2.js"></script>
    
    <!-- Initialize Background Effects -->
    <script>
        // Generate particles on page load
        if (typeof generateParticles === 'function') {
            generateParticles(6); // 6 particles for dashboard
        }
    </script>
</body>
</html>
